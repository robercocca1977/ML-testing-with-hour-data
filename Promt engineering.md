I want to generate a Python based strategy. The strategy would include momentum based on x bars (x would be train and optimized to maximize returns) last bars of data. The stock data is the us_hour_data folder inside Download folder in my computer. Include all the stocks in the folder, when a cloumn or a row is not available discard. Starting cash 9000. The strategy would include all this topics and features:
Use and event drive backtester. Backtrader or Zipline
Train using in smaple data and validates using out of sample data
Long/short Momentum
Portfolio costraint optimization
volatility targeting, when volatility is low increases positions and when volatility is high decreases positions
ML algorithm to increases predictions
Hyperparameter tuning
Regularization
Cross validation
Walk forward anasysis
Include all meaningful graphs to evaluate the strategy
Money management rules and position management
Montecarlo simulations
Include transaction costs
Be aware of not overfitted the code
Generate a realistic backtest mechanic
Give me complete working code to be run Jupyter Lab inside Anaconda 3 environment.
I attach an image to show you an example on how the csv files display.
ATTENTION: GIVE ME A CODE INCLUDE ALL THIS THINGS ALREADY IN THE FIRST ATTEMP. 
